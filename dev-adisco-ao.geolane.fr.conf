<VirtualHost *:80>
        ServerName dev-adisco-ao.geolane.fr
	ServerAdmin webmaster@geolane.fr
        LogLevel warn
        DirectoryIndex index.html index.php

        DocumentRoot /var/www/adisco-ao.geolane.fr/appels-offres
        <Directory /var/www/adisco-ao.geolane.fr/appels-offres>
                Options +FollowSymLinks
                AllowOverride all
                Require all granted
            <IfModule mod_rewrite.c>
                RewriteEngine on
                RewriteCond %{REQUEST_FILENAME} !-d
                RewriteCond %{REQUEST_FILENAME} !-f
                RewriteRule ^(.*)$ index.html
        </IfModule>
        </Directory>

        ProxyRequests Off
        ProxyPreserveHost On

        ProxyPass /aoBackoffice    http://127.0.0.1:8091/aoBackoffice
        ProxyPassReverse /aoBackoffice http://127.0.0.1:8091/aoBackoffice

</VirtualHost>
<VirtualHost *:443>
       ServerName dev-adisco-ao.geolane.fr
       ServerAdmin webmaster@geolane.fr
       DocumentRoot /var/www/adisco-ao.geolane.fr/appels-offres
       LogLevel warn
       DirectoryIndex index.html index.php

       <Directory /var/www/adisco-ao.geolane.fr/appels-offres>
              Options +FollowSymLinks
              AllowOverride all
              Require all granted
        <IfModule mod_rewrite.c>
               RewriteEngine on
               RewriteCond %{REQUEST_FILENAME} !-d
               RewriteCond %{REQUEST_FILENAME} !-f
               RewriteRule ^(.*)$ index.html
        </IfModule>
       </Directory>

       #Activation TLS Letsencrypt et action proxy pour tomcat TLS
       SSLProxyEngine on
       SSLCertificateFile /etc/letsencrypt/live/dev-adisco-ao.geolane.fr/fullchain.pem
       SSLCertificateKeyFile /etc/letsencrypt/live/dev-adisco-ao.geolane.fr/privkey.pem
       SSLCompression off
       Include /etc/letsencrypt/options-ssl-apache.conf

       #ProxyPass vers service spring-module-ao.service
       ProxyRequests Off
       ProxyPreserveHost On
       ProxyPass /aoBackoffice http://127.0.0.1:8091/aoBackoffice
       ProxyPassReverse /aoBackoffice http://127.0.0.1:8091/aoBackoffice

##       <Location />
##               Order deny,allow
##               deny from all
##               allow from XXX.XXX.XXX.XXX XXX.XXX.XXX.XXX
##       </Location>
</VirtualHost>
