server {
	server_name devischef-v2.geolane.fr;
	root /usr/share/nginx/html;
	index index.html;
	    location / {
      root   /usr/share/nginx/html;
      try_files $uri $uri/ /index.html;
      index  index.html index.htm;
      error_page 405 = $uri;
      proxy_set_header HOST $host;
      proxy_set_header X-Real-IP $remote_addr;

      add_header 'Access-Control-Allow-Origin' '*';
      add_header 'Access-Control-Allow-Credentials' 'true';
      proxy_set_header Host      $host:$server_port;
      proxy_set_header X-Real-IP $remote_addr;
	  
  
 }

    location /produit {

       proxy_pass http://elliance-gateway:8080/produit;
    }
	
	 location /categorie {

       proxy_pass http://elliance-gateway:8080/categorie;
    }

    location /contrat {
     proxy_set_header Host      $host:$server_port;
     proxy_set_header X-Real-IP $remote_addr;
     proxy_pass http://elliance-gateway:8080/contrat;
    }

    location /user {

	proxy_pass http://elliance-backend:8080/user;
        proxy_set_header Host      $host:$server_port;
   	proxy_set_header X-Real-IP $remote_addr;
     }
	 
	location /role {

	proxy_pass http://elliance-gateway:8080/role;
        proxy_set_header Host      $host:$server_port;
   	proxy_set_header X-Real-IP $remote_addr;
     }
	 location /menu {

	proxy_pass http://elliance-gateway:8080/menu;
        proxy_set_header Host      $host:$server_port;
   	proxy_set_header X-Real-IP $remote_addr;
     }
	 location /droit {

	proxy_pass http://elliance-gateway:8080/droit;
        proxy_set_header Host      $host:$server_port;
   	proxy_set_header X-Real-IP $remote_addr;
     }
    location /personnemorale {
       
       proxy_pass http://elliance-gateway:8080/personnemorale;
    }
    location /personnephysique {
       
       proxy_pass http://elliance-backend:8080/personnephysique;
    }
    location /eurochef-image {
       proxy_pass http://elliance-backend:8080/eurochef-image;
	   proxy_set_header Host      $host:$server_port;
    }
    location /images {
       proxy_pass http://elliance-backend:8080/images;
	    proxy_set_header Host      $host:$server_port;
    }
    location /pp-image {
       proxy_pass http://elliance-backend:8080/reportage-image;
    }


    location /image {
       
       proxy_set_header Host      $host:$server_port;
       proxy_set_header X-Real-IP $remote_addr;
	   client_max_body_size 5M;
 
      proxy_pass http://elliance-backend:8080/image;
    }
    location /entite {
       
       proxy_pass http://elliance-backend:8080/entite;
    }

    location /email {
       
       proxy_pass http://elliance-backend:8080/email;
    }
    location /tel {
       
       proxy_pass http://elliance-backend:8080/tel;
    }
    location /fax {
       proxy_pass http://elliance-backend:8080/fax;
    }
    location /commentaire {
       proxy_pass http://elliance-backend:8080/commentaire;
    }
    location /ville {
       proxy_pass http://elliance-backend:8080/ville;
    }
    location /pays {
       proxy_pass http://elliance-backend:8080/pays;
    }
    location /codepostal {
       proxy_pass http://elliance-backend:8080/codepostal;
    }
    location /swagger-ui {
       
       proxy_pass http://elliance-backend:8080/swagger-ui;
    }
    location /emailaddress {
       
       proxy_pass http://elliance-backend:8080/emailaddress;
    }
     location /fichier {
       proxy_pass http://elliance-backend:8080/fichier;
    }

     location /typepersonnephysique {
       proxy_pass http://elliance-backend:8080/typepersonnephysique;
    }
     location /typepersonnemorale {
       proxy_pass http://elliance-backend:8080/typepersonnemorale;
    }
     location /w2p {
       proxy_pass http://elliance-backend:8080/w2p;
    }
     location /w2p-modele {
       proxy_pass http://elliance-backend:8080/w2p-modele;
    }

  location /view {

	proxy_pass http://elliance-backend:8080/view;
        proxy_set_header Host      $host:$server_port;
   	proxy_set_header X-Real-IP $remote_addr;
     }
    location /auth/realms/bebeimage {
       
       proxy_pass http://keycloack:8080/auth/realms/bebeimage;
    }
	 location /template {

	    proxy_pass http://elliance-backend:8080/template;
        proxy_set_header Host      $host:$server_port;
   	    proxy_set_header X-Real-IP $remote_addr;
     }
	  location /actualite {
	    proxy_pass http://elliance-backend:8080/actualite;
        proxy_set_header Host      $host:$server_port;
   	    proxy_set_header X-Real-IP $remote_addr;
     }
  
    location /profile {
	    proxy_pass http://elliance-backend:8080/profile;
        proxy_set_header Host      $host:$server_port;
   	    proxy_set_header X-Real-IP $remote_addr;
     }
      
	    location /page {
	    proxy_pass http://elliance-backend:8080/page;
        proxy_set_header Host      $host:$server_port;
   	    proxy_set_header X-Real-IP $remote_addr;
     }
    location /SiteEnable {
	    proxy_pass http://elliance-backend:8080/SiteEnable;
        proxy_set_header Host      $host:$server_port;
   	    proxy_set_header X-Real-IP $remote_addr;
     }
  



    # redirect server error pages to the static page /50x.html
    #
    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
	listen 443 ssl http2;
	gzip off;
	
	ssl_certificate /etc/letsencrypt/live/devischef-v2.geolane.fr/fullchain.pem;
	ssl_certificate_key /etc/letsencrypt/live/devischef-v2.geolane.fr/privkey.pem;
	
	include /etc/letsencrypt/options-ssl-nginx.conf;
	ssl_dhparam /etc/letsencrypt/ssl-dhparams.pem;
}
